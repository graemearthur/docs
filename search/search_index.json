{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to rthur.me docs Deployed to GitHub Pages using GitHub Actions. A test to show workflow path filtering. Here I can list things I want to make easy for myself to find, do not store private information here","title":"Welcome to rthur.me docs"},{"location":"#welcome-to-rthurme-docs","text":"Deployed to GitHub Pages using GitHub Actions. A test to show workflow path filtering. Here I can list things I want to make easy for myself to find, do not store private information here","title":"Welcome to rthur.me docs"},{"location":"Commands/Brocades/","text":"Brocades Switch Cheat sheet: show ip address ipaddrshow set IP address ipaddrset licenseadd licenseremove user & password admin passwordnew","title":"Brocades Switch"},{"location":"Commands/Brocades/#brocades-switch","text":"","title":"Brocades Switch"},{"location":"Commands/Brocades/#cheat-sheet","text":"show ip address ipaddrshow set IP address ipaddrset licenseadd licenseremove","title":"Cheat sheet:"},{"location":"Commands/Brocades/#user-password","text":"admin passwordnew","title":"user &amp; password"},{"location":"Commands/FAI/","text":"DHCP updates cat /etc/dhcp/dhcpd.conf | grep -i reddgc001 service dhcpd restart Fai where classes is located vi /srv/fai/config/stretch/class/50-host-classes Creating FAI files fai-chboot -C /stretch/fai -IBv -s 4.9.0-6-amd64.stretch -u nfs://redfai000/stretch/config -k \"rootovl HOSTNAME=red99vm002\" red99vm002 fai-chboot -C /bullseye/fai -IBv -s 5.10.0-8-amd64.bullseye -u nfs://redfai000/bullseye/config -k \"rootovl HOSTNAME=red99vm002\" red99vm002 PXE commands get hex from hostname gethostip reddgc001 Don't forget to enable after file exists enablepxe 0AA440F4 Location of /PXE cd /srv/tftp/fai/pxelinux.cfg/ Commands for Nutanix VMs only commmand to set boot via pxe acli vm.update_boot_device red99vm002 mac_addr=50:6b:8d:a4:c4:84 command to reset nutanix boot device to default acli vm.update_boot_device vmname","title":"FAI"},{"location":"Commands/FAI/#dhcp-updates","text":"cat /etc/dhcp/dhcpd.conf | grep -i reddgc001 service dhcpd restart","title":"DHCP updates"},{"location":"Commands/FAI/#fai-where-classes-is-located","text":"vi /srv/fai/config/stretch/class/50-host-classes","title":"Fai where classes is located"},{"location":"Commands/FAI/#creating-fai-files","text":"fai-chboot -C /stretch/fai -IBv -s 4.9.0-6-amd64.stretch -u nfs://redfai000/stretch/config -k \"rootovl HOSTNAME=red99vm002\" red99vm002 fai-chboot -C /bullseye/fai -IBv -s 5.10.0-8-amd64.bullseye -u nfs://redfai000/bullseye/config -k \"rootovl HOSTNAME=red99vm002\" red99vm002","title":"Creating FAI files"},{"location":"Commands/FAI/#pxe-commands","text":"","title":"PXE commands"},{"location":"Commands/FAI/#get-hex-from-hostname","text":"gethostip reddgc001","title":"get hex from hostname"},{"location":"Commands/FAI/#dont-forget-to-enable-after-file-exists","text":"enablepxe 0AA440F4","title":"Don't forget to enable after file exists"},{"location":"Commands/FAI/#location-of-pxe","text":"cd /srv/tftp/fai/pxelinux.cfg/","title":"Location of /PXE"},{"location":"Commands/FAI/#commands-for-nutanix-vms-only","text":"","title":"Commands for Nutanix VMs only"},{"location":"Commands/FAI/#commmand-to-set-boot-via-pxe","text":"acli vm.update_boot_device red99vm002 mac_addr=50:6b:8d:a4:c4:84","title":"commmand to set boot via pxe"},{"location":"Commands/FAI/#command-to-reset-nutanix-boot-device-to-default","text":"acli vm.update_boot_device vmname","title":"command to reset nutanix boot device to default"},{"location":"Commands/Hardware%20Commands/","text":"Info on machine - Time/How long the machine has been up/Load uptime Check the disk partitions - mounts df -h Listing all of the directories in /s0 ls /s0 scr1 scr2 scratch spool tad Displaying messages from the machine - with time stamp dmesg -T Displaying messages from the machine - with a time stamp and string dmesg -T | grep -i error List the serial numbers (disks) hdparm -i /dev/sda | grep -i serial hdparm -i /dev/sd* | grep -i serial - wildcard for both disk (a/b) nvme list Using smart smartctl -a /dev/sd[a/b/c/d] Using smart nvme smartctl -a /dev/nvme?n0 - ? = the disk number GPU card checks nvidia-smi - shows GPU info in table nvidia-smi -L - Lists all available devices Script for showing GPU location on MB and devices available /flat4/pzapparo/gpulist.sh Ipmitool - commands ipmitool sel list - List all events ipmitool sdr - List status of all components ./ipmi_configure - Run IPMI configuration - Web access ipmitool sel clear - Clear all events Puppet puppet agent -t To run a I/O error check on the disks dd if=/dev/sda of=/dev/zero status=progress Test eth0 ethtool eth0 ethtool -t eth0 Check Tango file location ls /etc/tango Error investigation root@red2902096:~# zgrep -i error /var/log/syslog* Check for memory issues valgrind --tool=memcheck ls l Fai info puppet cert clean red3403039.int.cgg.com enablepxe red3403039","title":"Hardware Commands"},{"location":"Commands/Hardware%20Commands/#info-on-machine-timehow-long-the-machine-has-been-upload","text":"uptime","title":"Info on machine - Time/How long the machine has been up/Load"},{"location":"Commands/Hardware%20Commands/#check-the-disk-partitions-mounts","text":"df -h","title":"Check the disk partitions - mounts"},{"location":"Commands/Hardware%20Commands/#listing-all-of-the-directories-in-s0","text":"ls /s0 scr1 scr2 scratch spool tad","title":"Listing all of the directories in /s0"},{"location":"Commands/Hardware%20Commands/#displaying-messages-from-the-machine-with-time-stamp","text":"dmesg -T","title":"Displaying messages from the machine - with time stamp"},{"location":"Commands/Hardware%20Commands/#displaying-messages-from-the-machine-with-a-time-stamp-and-string","text":"dmesg -T | grep -i error","title":"Displaying messages from the machine - with a time stamp and string"},{"location":"Commands/Hardware%20Commands/#list-the-serial-numbers-disks","text":"hdparm -i /dev/sda | grep -i serial hdparm -i /dev/sd* | grep -i serial - wildcard for both disk (a/b) nvme list","title":"List the serial numbers (disks)"},{"location":"Commands/Hardware%20Commands/#using-smart","text":"smartctl -a /dev/sd[a/b/c/d]","title":"Using smart"},{"location":"Commands/Hardware%20Commands/#using-smart-nvme","text":"smartctl -a /dev/nvme?n0 - ? = the disk number","title":"Using smart nvme"},{"location":"Commands/Hardware%20Commands/#gpu-card-checks","text":"nvidia-smi - shows GPU info in table nvidia-smi -L - Lists all available devices","title":"GPU card checks"},{"location":"Commands/Hardware%20Commands/#script-for-showing-gpu-location-on-mb-and-devices-available","text":"/flat4/pzapparo/gpulist.sh","title":"Script for showing GPU location on MB and devices available"},{"location":"Commands/Hardware%20Commands/#ipmitool-commands","text":"ipmitool sel list - List all events ipmitool sdr - List status of all components ./ipmi_configure - Run IPMI configuration - Web access ipmitool sel clear - Clear all events","title":"Ipmitool - commands"},{"location":"Commands/Hardware%20Commands/#puppet","text":"puppet agent -t","title":"Puppet"},{"location":"Commands/Hardware%20Commands/#to-run-a-io-error-check-on-the-disks","text":"dd if=/dev/sda of=/dev/zero status=progress","title":"To run a I/O error check on the disks"},{"location":"Commands/Hardware%20Commands/#test-eth0","text":"ethtool eth0 ethtool -t eth0","title":"Test eth0"},{"location":"Commands/Hardware%20Commands/#check-tango-file-location","text":"ls /etc/tango","title":"Check Tango file location"},{"location":"Commands/Hardware%20Commands/#error-investigation","text":"root@red2902096:~# zgrep -i error /var/log/syslog*","title":"Error investigation"},{"location":"Commands/Hardware%20Commands/#check-for-memory-issues","text":"valgrind --tool=memcheck ls l","title":"Check for memory issues"},{"location":"Commands/Hardware%20Commands/#fai-info","text":"puppet cert clean red3403039.int.cgg.com enablepxe red3403039","title":"Fai info"},{"location":"Commands/Nutanix_Files/","text":"Nutanix Files Notes show all smb connections afs smb.conn verbose=true list all snapshots for a Nutanix File share_name afs snapshot.list share_name=infra-nexus list all file shares (example with grep) nutanix@NTNX-EOAACVM001NX-CVM:10.116.208.51:~$ ncli fs list-all-fs-shares | grep -i infra-nexus Name : swinfra-nexus Share Path : /swinfra-nexus Example of force deleting a Nutanix share from fsvm get uuid and share uuid from ncli fs list-all-fs-shares nutanix@NTNX-EOAACVM001NX-CVM:10.116.208.51:~$ ncli fs delete-share uuid=276beab3-e283-43a5-9df0-017cd32e1531 share-uuid=dd258bad-6891-4763-a87b-845f81995ce7 force=true Task Status : 0 Task Uuid : 734926ba-5b9e-48a3-7b62-2f7c65f54be0 <afs> nfs.show_clients Number of Clients connected: 8 List of client IP addresses: 10.115.64.112 10.115.129.29 10.115.129.31 10.116.192.56 10.116.192.226 10.116.200.3 10.116.200.4 10.116.200.26","title":"Nutanix Files Notes"},{"location":"Commands/Nutanix_Files/#nutanix-files-notes","text":"","title":"Nutanix Files Notes"},{"location":"Commands/Nutanix_Files/#show-all-smb-connections","text":"afs smb.conn verbose=true","title":"show all smb connections"},{"location":"Commands/Nutanix_Files/#list-all-snapshots-for-a-nutanix-file-share_name","text":"afs snapshot.list share_name=infra-nexus","title":"list all snapshots for a Nutanix File share_name"},{"location":"Commands/Nutanix_Files/#list-all-file-shares-example-with-grep","text":"nutanix@NTNX-EOAACVM001NX-CVM:10.116.208.51:~$ ncli fs list-all-fs-shares | grep -i infra-nexus Name : swinfra-nexus Share Path : /swinfra-nexus","title":"list all file shares (example with grep)"},{"location":"Commands/Nutanix_Files/#example-of-force-deleting-a-nutanix-share-from-fsvm","text":"","title":"Example of force deleting a Nutanix share from fsvm"},{"location":"Commands/Nutanix_Files/#get-uuid-and-share-uuid-from-ncli-fs-list-all-fs-shares","text":"nutanix@NTNX-EOAACVM001NX-CVM:10.116.208.51:~$ ncli fs delete-share uuid=276beab3-e283-43a5-9df0-017cd32e1531 share-uuid=dd258bad-6891-4763-a87b-845f81995ce7 force=true Task Status : 0 Task Uuid : 734926ba-5b9e-48a3-7b62-2f7c65f54be0 <afs> nfs.show_clients Number of Clients connected: 8 List of client IP addresses: 10.115.64.112 10.115.129.29 10.115.129.31 10.116.192.56 10.116.192.226 10.116.200.3 10.116.200.4 10.116.200.26","title":"get uuid and share uuid from ncli fs list-all-fs-shares"},{"location":"Commands/Stornext_Commands/","text":"Commands login to root sudo rootsh Log Files Generally there is quite a bit of information in the System log files with regard to stornext, but it also has its own log files that can provide more detailed information, the most useful of these are: /usr/adic/TSM/logs/tac/tac_00 This contains information about all TSM activities, and it can be a bit of a headache to decipher what is going on. /usr/adic/TSM/logs/trace/trace_01 This is updated after every store or retrieve, and although it does not contain the filenames or filesystems involved, it does show the tape used, the mover used, the size of files and the transfer rate. /usr/adic/MSM/logs/history/hist_00 This is updated for every tape mount and dismount and contains time, tape number and drive number. /usr/adic/TSM/logs/tac/backup.log A Full backup is run every Sunday night, and a partial on all other nights. The full backup process is recorded in this log file and should be looked at if there are any problems. Tapes The following commands are all to do with tape activity and can be helpful when tracking problems. fsstate This command shows the tape drives, their status, and the tapes mounted on them. fsmedinfo tapnum Gives information on the Media with relation to the HSM such as available unavailable, suspect , number of files on tape fsmedinfo -l media gives the above info plus a full list of files on tape. vsmedqry media Gives information on the media with relation to the archive such as which archive \u2013 i6k_archive2 (the robot) or vault1 (anywhere else such as tape racks) Class/policy commands fsaddclass - Created new class/policy with default policy options set. fsmodclass [options] - Change options for the class/policy fsaddrelation -c - add class/policy to directory, thus making it managed. best done when directory is empty. File manipulation fsstore [-c n ] filename - manually store n number of copies of a file fsretrieve -a filenam - retrieve file Operator Task Scripts /usr/adic/pcg/available_tapes \u2013 provides the number of blank tapes available in the robot /usr/adic/pcg/i6k_enter_blanktapes \u2013 takes no parameters and will enter any tapes that have been placed in the I/E stations into the robot as blank tapes. /usr/adic/pcg/i6kqry \u2013 provides the number of empty slots in the robot. /usr/adic/pcg/eject_i6k \u2013 Will eject a set number of tapes from the robot to free up space. Tapes picked according to the time they were last accessed \u2013 oldest first. /usr/adic/pcg/enter_tape_i6k \u2013 takes a tape number as a parameter, and will enter it from an I/E station into the robot when requested. /usr/adic/pcg/check_i6k_moves \u2013 returns any tapes that need to be moved from vault to robot. /usr/adic/pcg/enter_recycled_tapes \u2013 Instead of using new tapes, this script will list 20 pre-used but now empty tapes, (if any available) that can be put into the I/E station. The script will then enter the tapes as blanks.","title":"Stornext Commands"},{"location":"Commands/Stornext_Commands/#commands","text":"login to root sudo rootsh","title":"Commands"},{"location":"Commands/Stornext_Commands/#log-files","text":"Generally there is quite a bit of information in the System log files with regard to stornext, but it also has its own log files that can provide more detailed information, the most useful of these are: /usr/adic/TSM/logs/tac/tac_00 This contains information about all TSM activities, and it can be a bit of a headache to decipher what is going on. /usr/adic/TSM/logs/trace/trace_01 This is updated after every store or retrieve, and although it does not contain the filenames or filesystems involved, it does show the tape used, the mover used, the size of files and the transfer rate. /usr/adic/MSM/logs/history/hist_00 This is updated for every tape mount and dismount and contains time, tape number and drive number. /usr/adic/TSM/logs/tac/backup.log A Full backup is run every Sunday night, and a partial on all other nights. The full backup process is recorded in this log file and should be looked at if there are any problems.","title":"Log Files"},{"location":"Commands/Stornext_Commands/#tapes","text":"The following commands are all to do with tape activity and can be helpful when tracking problems. fsstate This command shows the tape drives, their status, and the tapes mounted on them. fsmedinfo tapnum Gives information on the Media with relation to the HSM such as available unavailable, suspect , number of files on tape fsmedinfo -l media gives the above info plus a full list of files on tape. vsmedqry media Gives information on the media with relation to the archive such as which archive \u2013 i6k_archive2 (the robot) or vault1 (anywhere else such as tape racks)","title":"Tapes"},{"location":"Commands/Stornext_Commands/#classpolicy-commands","text":"fsaddclass - Created new class/policy with default policy options set. fsmodclass [options] - Change options for the class/policy fsaddrelation -c - add class/policy to directory, thus making it managed. best done when directory is empty. File manipulation fsstore [-c n ] filename - manually store n number of copies of a file fsretrieve -a filenam - retrieve file","title":"Class/policy commands"},{"location":"Commands/Stornext_Commands/#operator-task-scripts","text":"/usr/adic/pcg/available_tapes \u2013 provides the number of blank tapes available in the robot /usr/adic/pcg/i6k_enter_blanktapes \u2013 takes no parameters and will enter any tapes that have been placed in the I/E stations into the robot as blank tapes. /usr/adic/pcg/i6kqry \u2013 provides the number of empty slots in the robot. /usr/adic/pcg/eject_i6k \u2013 Will eject a set number of tapes from the robot to free up space. Tapes picked according to the time they were last accessed \u2013 oldest first. /usr/adic/pcg/enter_tape_i6k \u2013 takes a tape number as a parameter, and will enter it from an I/E station into the robot when requested. /usr/adic/pcg/check_i6k_moves \u2013 returns any tapes that need to be moved from vault to robot. /usr/adic/pcg/enter_recycled_tapes \u2013 Instead of using new tapes, this script will list 20 pre-used but now empty tapes, (if any available) that can be put into the I/E station. The script will then enter the tapes as blanks.","title":"Operator Task Scripts"},{"location":"Commands/disks/","text":"Disks Physical & RAID Dell ### omreport summary raid status clear; echo \"\"; echo \"\u202f\u202f\u202f\u202f Hostname: $(hostname)\"; for i in `omreport storage vdisk | grep \"^ID\" | awk '{print $3 }'`; do printf '%58s\\n' | tr ' ' -; omreport storage vdisk | grep -A10 \"^ID\" | grep -i \"^ID\\|layout\\|^State\\|^Status\" | awk '{print $3 }' | grep -A3 -w \"^$i\" |tail -3| tr '\\n' \" \"; echo \"\"; omreport storage vdisk | grep -A12 \"^ID\" | grep -i \"^ID\\|write through\" | grep -v \"^ID\"; omreport storage pdisk controller=0 vdisk=$i| grep -i \"raid\\|Name\\|State\\|Predicted\\|Progress\" | grep -v \"Space\\|Applicable\\|: No\"; done; printf '%58s\\n' | tr ' ' - ### Dell - Display RAID status using omreport echo -e \"\\nPhysical Disk Status:\"; omreport storage pdisk controller=0 2>&1| grep -E '^ID|^Status|^Name|^State|^Failure Predicted|^Serial No.|^Part Number|^Capacity|^[[:space:]]$' | sed 's/^ID/\\nID/';echo -e \"\\nLogical Volume Status:\"; omreport storage vdisk controller=0 | grep -E '^ID|^Status|^State|^Name|^Layout|^Size|^Device|^[[:space:]]$'| sed 's/^ID/\\nID/' HP ### HP - Display RAID status using hpacucli This will display the RAID cache backup battery status as well as spindle and array status. hpacucli \"ctrl all show config detail\" | grep -E 'Firmware Version:|Cache Status:|Battery/Capacitor Status:|Logical Drive:|^ *Status:|Mirror Group|physicaldrive|Bay:|^ *$|Serial Number:'\u202f | grep -vE '^[[:space:]]*$' ### HP - Display RAID status using ssacli / hpssacli ssacli / hpssacli \"ctrl all show config detail\" | grep -E 'Firmware Version:|Cache Status:|Battery/Capacitor Status:|Logical Drive:|^ *Status:|Mirror Group|physicaldrive|Bay:|^ *$|Serial Number:'\u202f | grep -vE '^[[:space:]]*$' HP - Check RAID cache, accelerator, and battery status using ssacli, hpacucli or\u202fhpssacli using hpacucli: hpacucli ctrl all show config detail | grep -iE 'cache|accel|Battery' using hpssacli: ssacli / hpssacli ctrl all show config detail | grep -iE 'cache|accel|Battery' [root@545792-dr-app1 ~]# omreport storage pdisk controller=0 | egrep \"Name|Stat|Fail|^$\" Array & Virtual Disk Info List of Virtual Disks in the System useful to check raid level of disks. omreport storage vdisk Physical Disks check physical disk status omreport storage pdisk controller=0 pdisk=0:1:1 Omreport RAID omreport storage pdisk controller=0|grep Progress omreport storage pdisk controller=0 List of Physical Disks belonging to array 00 omreport storage pdisk controller=0 vdisk=0","title":"Disks"},{"location":"Commands/disks/#disks-physical-raid","text":"Dell ### omreport summary raid status clear; echo \"\"; echo \"\u202f\u202f\u202f\u202f Hostname: $(hostname)\"; for i in `omreport storage vdisk | grep \"^ID\" | awk '{print $3 }'`; do printf '%58s\\n' | tr ' ' -; omreport storage vdisk | grep -A10 \"^ID\" | grep -i \"^ID\\|layout\\|^State\\|^Status\" | awk '{print $3 }' | grep -A3 -w \"^$i\" |tail -3| tr '\\n' \" \"; echo \"\"; omreport storage vdisk | grep -A12 \"^ID\" | grep -i \"^ID\\|write through\" | grep -v \"^ID\"; omreport storage pdisk controller=0 vdisk=$i| grep -i \"raid\\|Name\\|State\\|Predicted\\|Progress\" | grep -v \"Space\\|Applicable\\|: No\"; done; printf '%58s\\n' | tr ' ' - ### Dell - Display RAID status using omreport echo -e \"\\nPhysical Disk Status:\"; omreport storage pdisk controller=0 2>&1| grep -E '^ID|^Status|^Name|^State|^Failure Predicted|^Serial No.|^Part Number|^Capacity|^[[:space:]]$' | sed 's/^ID/\\nID/';echo -e \"\\nLogical Volume Status:\"; omreport storage vdisk controller=0 | grep -E '^ID|^Status|^State|^Name|^Layout|^Size|^Device|^[[:space:]]$'| sed 's/^ID/\\nID/' HP ### HP - Display RAID status using hpacucli This will display the RAID cache backup battery status as well as spindle and array status. hpacucli \"ctrl all show config detail\" | grep -E 'Firmware Version:|Cache Status:|Battery/Capacitor Status:|Logical Drive:|^ *Status:|Mirror Group|physicaldrive|Bay:|^ *$|Serial Number:'\u202f | grep -vE '^[[:space:]]*$' ### HP - Display RAID status using ssacli / hpssacli ssacli / hpssacli \"ctrl all show config detail\" | grep -E 'Firmware Version:|Cache Status:|Battery/Capacitor Status:|Logical Drive:|^ *Status:|Mirror Group|physicaldrive|Bay:|^ *$|Serial Number:'\u202f | grep -vE '^[[:space:]]*$' HP - Check RAID cache, accelerator, and battery status using ssacli, hpacucli or\u202fhpssacli using hpacucli: hpacucli ctrl all show config detail | grep -iE 'cache|accel|Battery' using hpssacli: ssacli / hpssacli ctrl all show config detail | grep -iE 'cache|accel|Battery' [root@545792-dr-app1 ~]# omreport storage pdisk controller=0 | egrep \"Name|Stat|Fail|^$\"","title":"Disks Physical &amp; RAID"},{"location":"Commands/disks/#array-virtual-disk-info","text":"","title":"Array &amp; Virtual Disk Info"},{"location":"Commands/disks/#list-of-virtual-disks-in-the-system-useful-to-check-raid-level-of-disks","text":"omreport storage vdisk","title":"List of Virtual Disks in the System useful to check raid level of disks."},{"location":"Commands/disks/#physical-disks","text":"","title":"Physical Disks"},{"location":"Commands/disks/#check-physical-disk-status","text":"omreport storage pdisk controller=0 pdisk=0:1:1 Omreport RAID omreport storage pdisk controller=0|grep Progress omreport storage pdisk controller=0","title":"check physical disk status"},{"location":"Commands/disks/#list-of-physical-disks-belonging-to-array-00","text":"omreport storage pdisk controller=0 vdisk=0","title":"List of Physical Disks belonging to array 00"},{"location":"Commands/gitlab/","text":"Gitlab Commands Backup & migration root@eoaagit001nx:/data/backup# chmod 777 garthur_gitlab_backup.tar root@eoaagit001nx:/data/backup# gitlab-backup restore BACKUP=garthur Rsync artifacts rsync -avz --progress root@redgit002:/git/gitlab/artifacts /data/gitlab/ rsync -avz --progress root@redgit002:/git/gitlab/container-registry /data/gitlab/ Gitlab Backup final testing Start Backup (with registry images and artifacts skipped) Command used: root@redgit002:~# gitlab-rake gitlab:backup:create SKIP=artifacts,registry RAILS_ENV=production restore root@eoaagit001nx:/data/backup# gitlab-backup restore BACKUP=1709194307_2024_02_29_16.3.2","title":"Gitlab Commands"},{"location":"Commands/gitlab/#gitlab-commands","text":"","title":"Gitlab Commands"},{"location":"Commands/gitlab/#backup-migration","text":"root@eoaagit001nx:/data/backup# chmod 777 garthur_gitlab_backup.tar root@eoaagit001nx:/data/backup# gitlab-backup restore BACKUP=garthur","title":"Backup &amp; migration"},{"location":"Commands/gitlab/#rsync-artifacts","text":"rsync -avz --progress root@redgit002:/git/gitlab/artifacts /data/gitlab/ rsync -avz --progress root@redgit002:/git/gitlab/container-registry /data/gitlab/","title":"Rsync artifacts"},{"location":"Commands/gitlab/#gitlab-backup-final-testing","text":"Start Backup (with registry images and artifacts skipped) Command used: root@redgit002:~# gitlab-rake gitlab:backup:create SKIP=artifacts,registry RAILS_ENV=production","title":"Gitlab Backup final testing"},{"location":"Commands/gitlab/#restore","text":"root@eoaagit001nx:/data/backup# gitlab-backup restore BACKUP=1709194307_2024_02_29_16.3.2","title":"restore"},{"location":"Commands/systemctl/","text":"useful Commands to file / Remember command to stop ETX connection node systemctl stop otetxcn.service command to stop ETX server systemctl stop ot.service Command to restart xorg with Multiple seats /etc/init.d/xorg-multiterminal restart systemctl show all running systemctl --type=service --state=running systemctl file systemctl cat processname","title":"useful Commands to file / Remember"},{"location":"Commands/systemctl/#useful-commands-to-file-remember","text":"","title":"useful Commands to file / Remember"},{"location":"Commands/systemctl/#command-to-stop-etx-connection-node","text":"systemctl stop otetxcn.service","title":"command to stop ETX connection node"},{"location":"Commands/systemctl/#command-to-stop-etx-server","text":"systemctl stop ot.service","title":"command to stop ETX server"},{"location":"Commands/systemctl/#command-to-restart-xorg-with-multiple-seats","text":"/etc/init.d/xorg-multiterminal restart","title":"Command to restart xorg with Multiple seats"},{"location":"Commands/systemctl/#systemctl-show-all-running","text":"systemctl --type=service --state=running","title":"systemctl show all running"},{"location":"Commands/systemctl/#systemctl-file","text":"systemctl cat processname","title":"systemctl file"},{"location":"Commands/useful_commands/","text":"display when your user setenv DISPLAY redapp105:39 set display when root export DISPLAY=redapp101:15 set proxy as root export https_proxy=http://gateway.zscaler.net:80 export http_proxy=http://gateway.zscaler.net:80 set proxy as user setenv https_proxy http://gateway.zscaler.net:80 setenv http_proxy http://gateway.zscaler.net:80 Check space used :~# du -hx /s0 | sort -h find high load dead processes ps -eo s,user,cmd,pid | grep ^[RD] |wc -l when ifdown doesn't work ifconfig eth0 down ps -eo pid,lstart,cmd The above command will output all processes, with formatters to get PID, command run, and date+time started. From https://stackoverflow.com/questions/5731234/how-to-get-the-start-time-of-a-long-running-linux-process | wc-l Count number of lines From https://stackoverflow.com/questions/6314679/in-bash-how-do-i-count-the-number-of-lines-in-a-variable oneliner to ssh-copy-id in windows - replace hostname type $env:USERPROFILE\\.ssh\\id_rsa.pub | ssh 192.168.30.31 \"cat >> .ssh/authorized_keys\"","title":"Useful commands"},{"location":"Commands/useful_commands/#set-proxy-as-root","text":"export https_proxy=http://gateway.zscaler.net:80 export http_proxy=http://gateway.zscaler.net:80","title":"set proxy as root"},{"location":"Commands/useful_commands/#set-proxy-as-user","text":"setenv https_proxy http://gateway.zscaler.net:80 setenv http_proxy http://gateway.zscaler.net:80 Check space used :~# du -hx /s0 | sort -h","title":"set proxy as user"},{"location":"Commands/useful_commands/#find-high-load-dead-processes","text":"ps -eo s,user,cmd,pid | grep ^[RD] |wc -l","title":"find high load dead processes"},{"location":"Commands/useful_commands/#when-ifdown-doesnt-work","text":"ifconfig eth0 down ps -eo pid,lstart,cmd The above command will output all processes, with formatters to get PID, command run, and date+time started. From https://stackoverflow.com/questions/5731234/how-to-get-the-start-time-of-a-long-running-linux-process | wc-l Count number of lines From https://stackoverflow.com/questions/6314679/in-bash-how-do-i-count-the-number-of-lines-in-a-variable oneliner to ssh-copy-id in windows - replace hostname type $env:USERPROFILE\\.ssh\\id_rsa.pub | ssh 192.168.30.31 \"cat >> .ssh/authorized_keys\"","title":"when ifdown doesn't work"}]}